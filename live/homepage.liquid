<style>
  :root {
    --text-color: {{ settings.textColor }};
    --background-color: {{ settings.backgroundColor }};
  }

  @keyframes blur-in {
    0% {
      filter: blur(16px);
      transform: scale(1.05);
    }
    30% {
      filter: blur(16px);
      transform: scale(1.05);
    }
    100% {
      filter: blur(0);
      transform: scale(1);
    }
  }
</style>

<header />

<main class="mb-20 w-full text-[var(--text-color)]">
  {% if posts.size > 0 %}
    <div class="mx-auto w-full max-w-screen-xl md:mb-28 lg:w-5/6">
      <a href="/{{ posts[0].slug }}">
        <div class="group relative mx-auto h-80 w-full overflow-hidden sm:h-150 lg:rounded-xl">
          <!-- Image Component -->
          <img 
            alt="{{ posts[0].title | default: '' }}" 
            src="{{ posts[0].image | default: '/placeholder.png' }}" 
            width="1300" 
            height="630" 
            class="size-full object-cover group-hover:scale-105 transition-transform duration-700 ease-in-out group-hover:duration-300 animate-[blur-in_1s_ease-in-out]"
          />
        </div>
        <div class="mx-auto mt-10 w-5/6 lg:w-full">
          <h2 class="my-10 font-title text-4xl md:text-6xl dark:text-white">
            {{ posts[0].title }}
          </h2>
          <p class="w-full text-base md:text-lg lg:w-2/3 dark:text-white">
            {{ posts[0].description }}
          </p>
          <div class="flex w-full items-center justify-start space-x-4">
            <div class="relative size-8 flex-none overflow-hidden rounded-full">
              {% if data.user.image %}
                <!-- Image Component -->
                <img 
                  alt="{{ data.user.name | default: 'User Avatar' }}" 
                  src="{{ data.user.image }}" 
                  width="100" 
                  height="100" 
                  class="size-full object-cover" 
                />
              {% else %}
                <div class="absolute flex size-full select-none items-center justify-center bg-stone-100 text-4xl text-stone-500">
                  ?
                </div>
              {% endif %}
            </div>
            <p class="ml-3 inline-block whitespace-nowrap align-middle text-sm font-semibold md:text-base dark:text-white">
              {{ posts[0].writtenBy.name }}
            </p>
            <div class="h-6 border-l border-stone-600 dark:border-stone-400"></div>
            <p class="m-auto my-5 w-10/12 text-sm font-light opacity-70 md:text-base">
              {% assign createdAtMonthNumber = posts[0].createdAt | date: "%-m" | minus: 1 %}
               {{ locales.homepage.published }} {{ locales.date.shortMonths[createdAtMonthNumber]}} {{ posts[0].createdAt | date: "%d, %Y" }}
            </p>
          </div>
        </div>
      </a>
    </div>
  {% else %}
    <div class="flex flex-col items-center justify-center py-20">
      <!-- Fallback Images -->
      <img 
        alt="missing post" 
        src="/placeholders/success.svg" 
        width="400" 
        height="400" 
        class="dark:hidden" 
      />
      <img 
        alt="missing post" 
        src="/placeholders/success.svg" 
        width="400" 
        height="400" 
        class="hidden dark:block" 
      />
      <p class="font-title text-2xl opacity-80">
        {{ locales.homepage.noPostsYet }}
      </p>
    </div>
  {% endif %}

  {% if promotedPosts.size > 0 %}
    <div class="mx-5 mb-20 max-w-screen-xl lg:mx-24 2xl:mx-auto">
      <h2 class="mb-10 font-title text-4xl md:text-5xl dark:text-white">
        {{ locales.homepage.promoted }}
      </h2>
      <div class="grid w-full grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-2 xl:grid-cols-3">
        {% for post in promotedPosts %}
          <a href="/{{ post.slug }}">
            <div class="ease overflow-hidden rounded-2xl border-2 border-stone-100 bg-white shadow-md transition-all duration-200 hover:-translate-y-1 hover:shadow-xl dark:border-stone-800">
              <img
                src="{{ post.image | default: '/placeholder.png' }}"
                alt="{{ post.title | default: 'Blog Post' }}"
                width="500"
                height="400"
                class="h-64 w-full object-cover animate-[blur-in_1s_ease-in-out]"
              />
              <div class="h-36 border-t border-stone-200 px-5 py-8 dark:border-stone-700 dark:bg-black">
                <h3 class="font-title text-xl tracking-wide dark:text-white">
                  {{ post.title }}
                </h3>
                <p class="my-2 truncate italic text-stone-600 dark:text-stone-400">
                  {{ post.description }}
                </p>
                <p class="my-2 text-sm text-stone-600 dark:text-stone-400">
                {% assign createdAtMonthNumber = post.createdAt | date: "%-m" | minus: 1 %}
                {{ locales.homepage.published }} {{ locales.date.months[createdAtMonthNumber]}} {{ post.createdAt | date: "%d, %Y" }}
                </p>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  {% if posts.size > 1 %}
    <div class="mx-5 mb-20 max-w-screen-xl lg:mx-24 2xl:mx-auto">
      <h2 class="mb-10 font-title text-4xl md:text-5xl dark:text-white">
        {{ locales.homepage.moreStories }}
      </h2>
      <div class="grid w-full grid-cols-1 gap-x-4 gap-y-8 md:grid-cols-2 xl:grid-cols-3">
        {% for post in posts offset:1 %}
          <a href="/{{ post.slug }}">
            <div class="ease overflow-hidden rounded-2xl border-2 border-stone-100 bg-white shadow-md transition-all duration-200 hover:-translate-y-1 hover:shadow-xl dark:border-stone-800">
              <img
                src="{{ post.image | default: '/placeholder.png' }}"
                alt="{{ post.title | default: 'Blog Post' }}"
                width="500"
                height="400"
                class="h-64 w-full object-cover animate-[blur-in_1s_ease-in-out]"
              />
              <div class="h-36 border-t border-stone-200 px-5 py-8 dark:border-stone-700 dark:bg-black">
                <h3 class="font-title text-xl tracking-wide dark:text-white">
                  {{ post.title }}
                </h3>
                <p class="my-2 truncate italic opacity-70">
                  {{ post.description }}
                </p>
                <p class="my-2 text-sm opacity-70">
                {% assign createdAtMonthNumber = post.createdAt | date: "%-m" | minus: 1 %}
                {{ locales.homepage.published }} {{ locales.date.months[createdAtMonthNumber]}} {{ post.createdAt | date: "%d, %Y" }}
                </p>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}
</main>

<footer />
